---
layout: default
toc: true
---

<head>
    <!-- Link to the table styling file -->
    <link rel="stylesheet" href="{{ '/assets/css/gene-info-table-style.scss' | relative_url }}">

    <!-- jQuery (must be loaded first) -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

    <!-- DataTable CSS -->
    <link rel="stylesheet" href="https://cdn.datatables.net/1.12.1/css/jquery.dataTables.min.css">

    <!-- DataTable JS -->
    <script defer src="https://cdn.datatables.net/1.12.1/js/jquery.dataTables.min.js"></script>

    <!-- <script src="{{ '/assets/js/gene-table-filter.js' | relative_url }}"></script> -->
</head>

{% include head.html %}

<div class="page-content">

    <div class="content-wrapper">

        <h1>{{ page.title }}</h1>

        <div class="table-container">
            <h3>Description</h3>
            {{ page.description }}

            <h3>Chromosomal location</h3>
            <a href="https://genome.ucsc.edu/cgi-bin/hgTracks?db=hg19&amp;position=chr{{ page.chromosome }}:{{ page.start }}-{{ page.end }}&amp;dgv=pack&amp;knownGene=full&amp;omimGene=pack" target="_blank" >Chr{{ page.chromosome }}:{{ page.start }}-{{ page.end }}</a>
            <img src="{{ page.cytoband }}" width="994" height="27" style="display: inline;">
            
            <h3>Orphanet disorders</h3>
            <ol>
                {% for orphadata in page.orphadata %}
                <li>
                    {% if orphadata.orphacode %}<strong>ORPHA: <a href="https://www.orpha.net/en/disease/detail/{{ orphadata.orphacode }}" >{{
                        orphadata.orphacode }}</a>{% endif %},
                    {% if orphadata.cause %}{{ orphadata.cause }} syndrome {% endif %}</strong> <br>
                    <strong>OMIM:</strong>
                    {% assign omim_exists = true %}
                    {% for omim in orphadata.omim %}
                        {% if omim and omim.size > 0 %}
                            {% assign omim_exists = false %}
                            <a href="https://omim.org/entry/{{ omim_entry }}">{{ omim }}</a>
                        {% endif %}
                    {% endfor %}

                    {% if omim_exists == true %}
                        NA
                    {% endif %} <br>
                    {% if orphadata.description %}<strong>Description:</strong> {{ orphadata.description }}{% endif %} <br>
                    {% if orphadata.prevalence %}<strong>Prevalence:</strong> {{ orphadata.prevalence }}{% endif %} 
                    
                </li>
                {% endfor %}
            </ol>         

            <h3>Common phenotypic features</h3>
            {{ page.phenotypic_features }}

            <h3>Interactive Pathway Viewer</h3>
            <iframe src="https://pathway-viewer.toolforge.org/?id={{ page.wikipathways_id }}" width="600px"
                height="300px" style="overflow:hidden;"></iframe>

            <h3>Gene information</h3>
            <div class="table-container">
                <table id="gene-info-table" class="display">
                    <thead>
                        <tr>
                            <th>HGNC</th>
                            <th>Gene Name</th>
                            <th>NCBI</th>
                            <th>Ensembl</th>
                            <th>UniProt</th>

                        </tr>
                    </thead>
                    <tbody>
                    </tbody>
                </table>
            </div>

            <h2>References</h2>
            <ol>
                {% for ref in page.references %}
                <li>
                    <em>{{ ref.title }}</em>.
                    {% if ref.id %}[{{ ref.id }}] {% endif %}
                    {% if ref.authors %}{{ ref.authors }}, {% endif %}
                    {% if ref.journal %}<strong>{{ ref.journal }}</strong>, {% endif %}
                    {% if ref.publisher %}{{ ref.publisher }}, {% endif %}
                    {% if ref.year %}{{ ref.year }}, {% endif %}
                    {% if ref.volume %}Vol. {{ ref.volume }}, {% endif %}
                    {% if ref.issue %}Issue {{ ref.issue }}, {% endif %}
                    {% if ref.pages %}pp. {{ ref.pages }}, {% endif %}
                    {% if ref.isbn %}ISBN: {{ ref.isbn }}, {% endif %}
                    {% if ref.pmid %}PMID: <a href="https://pubmed.ncbi.nlm.nih.gov/{{ ref.pmid }}/" target="_blank">{{
                        ref.pmid }}</a>{% endif %}
                    {% if ref.link %}<a href="{{ ref.link }}" target="_blank">[Link]</a>{% endif %}
                    {% if ref.retrieved %}(Retrieved: {{ ref.retrieved }}){% endif %}
                </li>
                {% endfor %}
            </ol>

        </div>
    </div>
</div>

<script>
    async function fetchGeneData(geneSymbol) {
        try {
            const response = await fetch(`https://rest.genenames.org/fetch/symbol/${geneSymbol}`, {
                headers: {
                    'Accept': 'application/json'
                }
            });

            if (!response.ok) {
                console.error(`Failed to fetch data for ${geneSymbol}`);
                return null;
            }

            const data = await response.json();
            if (data.response && data.response.docs.length > 0) {
                return data.response.docs[0];
            } else {
                console.warn(`No data found for ${geneSymbol}`);
                return null;
            }
        } catch (error) {
            console.error('Error fetching gene data:', error);
            return null;
        }
    }

    async function displayGeneLinks(geneSymbols) {
        const tableBody = document.querySelector('#gene-info-table tbody');
        let rows = [];

        const geneDataPromises = geneSymbols.map(async (symbol) => {
            const geneData = await fetchGeneData(symbol);

            if (geneData) {
                const hgncId = geneData.hgnc_id || 'No ID';
                const geneName = geneData.name || 'No name available';
                const ncbiId = geneData.entrez_id || 'No ID';
                const ensemblId = geneData.ensembl_gene_id || 'No ID';
                const uniprotId = geneData.uniprot_ids ? geneData.uniprot_ids[0] : 'No ID';

                return `
                <tr>
                    <td><a href="https://www.genenames.org/data/gene-symbol-report/#!/hgnc_id/${hgncId}" target="_blank">${symbol}</a></td>
                    <td>${geneName}</td>
                    <td><a href="https://www.ncbi.nlm.nih.gov/gene/${ncbiId}" target="_blank">${ncbiId}</a></td>
                    <td><a href="https://www.ensembl.org/Homo_sapiens/Gene/Summary?g=${ensemblId}" target="_blank">${ensemblId}</a></td>
                    <td><a href="https://www.uniprot.org/uniprotkb/${uniprotId}" target="_blank">${uniprotId}</a></td>
                </tr>
            `;
            } else {
                return `<tr><td colspan="7">No data available for ${symbol}</td></tr>`;
            }
        });

        // Wait for all gene data to be fetched
        const rowsHTML = await Promise.all(geneDataPromises);

        // Insert all rows at once
        tableBody.innerHTML = rowsHTML.join('');
    }


    const geneSymbols = {{ page.genes | jsonify }};
    displayGeneLinks(geneSymbols);
</script>


<style>
    /* Page Layout */
    .page-content {
        max-width: 1280px;
    }

    /* Main Content */
    .content-wrapper {
        padding: 20px;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        max-width: 1280px;
    }

    h3 {
        margin-top: 20px;
    }

    ul {
        list-style: none;
        padding-left: 20px;
    }

    .initial-content {
        display: flex;
        justify-content: center;
    }
</style>